# 需求分析方法

## 需求分析基础

### 为什么要需求分析

#### 需求分析的任务[Bin2009]

* 建立分析模型，达成开发者和用户对需求信息的共同理解
* 依据共同的理解，发挥创造性，创建软件系统解决方案

### 需求分析模型

* “模型是对食物的抽象，帮助人们在创建一个事物之前可以有更好的理解”[Blaha2005]
* 建立模型的过程被称为建模。“它是对系统进行思考和推理的一种方式。建模的目标是建立系统的一个表示，这个表示以精确一致的放描述系统，使得系统的使用更加容易”[Fishwick1994]

#### 建模常见手段

* 抽象
* 分解

#### 需求分析模型


<table>
	<tr style="background:#333">
	    <th>方法</th>
	    <th>模型</th>
	    <th>描述</th>  
	</tr >
	<tr >
	    <td rowspan="2">结构化方法</td>
	    <td>数据流图</td>
	    <td>从数据传递和加工的角度，描述来系统从输入到输出的功能处理过程。运用功能分解的方法，用层次结构简化处理复杂的问题。</td>
	</tr>
	<tr>
	    <td>实体关系图</td>
	    <td>描述系统中的数据对象及其关系，定义了系统中使用、处理和产生的所有数据。</td>
	</tr>
    <tr>
        <td rowspan="4">面向对象方法</td>
	    <td>用例图</td>
	    <td>描述用户与系统的交互。从交互的角度说明来系统的边界和功能范围。</td>
    </tr>
    <tr>
        <td>类图</td>
        <td>描述应用领域当中重要的概念以及概念之间的关系。它捕获了系统的讲台结构。</td>
    </tr>
    <tr>
        <td>交互图</td>
        <td>描述系统中一次交互的行为过程，说明了在交互当中的对象协作关系。</td>
    </tr>
    <tr>
        <td>状态图</td>
        <td>描述系统、用例或者对象在其生命周期内的状态变化和行为过程。</td>
    </tr>
<table>

## 面向对象分析
> 待补充：面向对象分析的简单过程


### 用例图与用例描述（角色与任务）

#### 用例

目标、交互与行为序列

#### 案例

#### 用例基本元素

* 用例
* 参与者
* 关系
* 系统边界

#### 用例图的建立

* 目标分析与解决方向的确定
* 寻找参与者
* 寻找用例
* 细化用例


### 概念类图/分析类图（UML类图）重要
* 又称为“领域模型”
* 类图是面向对象分析方法的核心
  * 描述类（对象）和这些类（对象）之间的关系
* 与设计类图有所不同
  * 关注系统与外界的交互，而不是软件系统内部构造机制
* 类型、方法、可见性等复杂的软件构造细节不会在概念类图中

#### 基本元素
+ 对象
  + 标示符
  + 状态
  + 行为
+ 类
  + 对象集合的抽象
+ 关联
  + 对象之间链接的抽象
  + 聚合与组合
+ 继承
  + 泛化关系

#### 建立概念类图
+ 对每个用例文本描述，尤其是场景描述，建立局部的概念类图
  + 根据用例的文本描述，识别候选类
  + 筛选候选类，确定概念类
  + 识别关联
  + 识别重要属性

+ 将所有用例产生的局部概念类图进行合并，建立软件系统的整体概念类图 

#### 候选类识别
+ 发现软件系统与外界交互时可能涉及的对象与类，他们就是候选类
+ 行为分析、名词分析、趁热吃、等很多方法都可以用来分析用例文本描述

#### 确定概念类的原则
+ 依据系统的需求
+ 该类的对象示例的状态与行为是否完全必要

#### 概念类案例

* 收据
* 商品标识

#### 候选类向概念类的转化

+ 如果候选类的对象实例
  + 既需要维持一定的状态，有需要依据状态表现一定行为
    + 确定为一个概念类
  + 如只需要维护状态，不需要表现行为
    + 其它概念类的属性
  + 不需要维护状态，却需要表现行为
    + 首先要重新审视需求是否有遗漏，因为没有状态支持对象无法表现行为
    + 如果确定没有需求的遗漏，就需要剔除该候选类，并将行为转交给具备状态支持能力的 其它概念类
  + 既不需要维护状态，又不需要表现行为
    + 应该完全剔除

#### 识别关联
+ 分析用例文本描述，发现概念类之间的协作，需要协作的类之间需要建立关联
+ 分析和补充问题域内的 关系，例如概念类之间的整体部分关系和明显的予以联系
  + 对问题域关系的补充要适可而止，不要把关系搞得复杂化
+ 去除冗余关联和导出关联

#### 识别重要属性

* 这些属性往往是实现协作是必要的信息，是协作的条件、输入、结果或者过程记录
* 通过分析用例的描述 ，并与用户交流，补充问题域信息，可以发现重要的属性信息
* 在分析每个单独的用例描述时，为各个概念类发现的重要属性可能不多，甚至有些概念没有任何重要属性。但是，系统通常有多个 用例个很多场景，会建立多个 局部的 概念类图，只有合并所有局部概念类图 之后，各个概念类的重要属性才能得到全面的体现


### 顺序图/系统顺序图

#### 基本元素：
图名称、对象、生命线、组合段、执行态、消息、创建、撤销以及返回
纵向为时间轴，横轴表示参与协作的对象
消息：同步消息实践三角，异步消息实践鱼骨，返回消息虚线鱼骨

#### 建立
1) 确定上下文环境
2) 根据用例描述找到交互对象
3) 按照流程顺序逐步添加信息

### 状态图

#### 建立状态图 
* 确定上下文环境
  * 状态图是立足于状态快照进行行为描述的，因此建立状态图是首先要搞清楚状态的主体，确定状态的上下文环境。常见的状态主体有：类、用例、多个用例和整个系统。
* 识别状态
  * 状态主体会表现一些稳定的状态，它们需要被识别出来，并且标记出其中的初始状态和结束状态结果集。在有些情况下，可能会不存在确定的初始状态和结束状态
* 建立状态转换
  * 根据需求所描述的系统行为，建立各个稳定状态之间可能存在的转换
* 补充详细信息，完善状态图
  * 添加转换的触发事件、转换行为和监护条件等详细信息

## 结构化分析
* 上下文图
* 数据流图
* 实体关系图

### 结构化分析
*  自顶向下分解
*  图 
   *  数据流图
   *  实体关系图
   *  状态转移图

## 使用需求分析方法细化和明确需求

### 细化和明确需求内容
* 为什么要细化
  * 用户需求的描述的 模糊性和系统需求的严谨性之间的矛盾
* 如何细化
  * 需求分析建模
  * 发现其中的遗漏、冲突、冗余和错误 
  * 迭代（获取、分析、获取、分析。。。。）

- 系统顺序图有助于发现交互性的缺失
- 概念类图有助于发现部分信息的使用不准确、信息的不明确 、遗漏了重要内容
- 状态图有助于发现页面的跳转
### 建立系统需求
+ 8种规格说明
+ 不同的分析方法适合不同的规格说明